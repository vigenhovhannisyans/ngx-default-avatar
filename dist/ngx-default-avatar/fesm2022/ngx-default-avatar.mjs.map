{"version":3,"file":"ngx-default-avatar.mjs","sources":["../../../projects/ngx-default-avatar/src/lib/component/ngx-default-avatar.component.ts","../../../projects/ngx-default-avatar/src/lib/component/ngx-default-avatar.component.html","../../../projects/ngx-default-avatar/src/lib/ngx-default-avatar.module.ts","../../../projects/ngx-default-avatar/src/public-api.ts","../../../projects/ngx-default-avatar/src/ngx-default-avatar.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  QueryList,\n  ViewChild,\n  ViewChildren,\n} from '@angular/core';\n\ntype SizeType = {\n  width: string;\n  height: string;\n};\n\ntype PreviewSize =\n  | 'auto'\n  | 'contain'\n  | 'cover'\n  | 'inherit'\n  | 'initial'\n  | 'revert'\n  | 'unset'\n  | '100% 100%';\n\n@Component({\n  selector: 'ngx-avatar',\n  templateUrl: './ngx-default-avatar.component.html',\n  styleUrls: ['./ngx-default-avatar.component.scss'],\n})\nexport class NgxDefaultAvatarComponent implements AfterViewInit, OnChanges {\n  @ViewChild('avatar')\n  public avatar!: ElementRef;\n\n  @ViewChild('containerContent')\n  public containerContent!: ElementRef;\n\n  @ViewChild('fileUpload')\n  public fileUpload!: ElementRef;\n\n  @ViewChildren('letter')\n  public letters!: QueryList<ElementRef>;\n\n  @Input()\n  public fullName?: string;\n\n  @Input()\n  public imageURL!: string;\n\n  @Input()\n  public removeImage: boolean = false;\n\n  @Input()\n  public isChangeable: boolean = true;\n\n  @Input()\n  public isBold: boolean = true;\n\n  @Input()\n  public acceptTypes: string = 'image/jpeg, image/png, image/jpg, image/svg';\n\n  @Input()\n  public backDropColor: string = '#00000099';\n\n  @Input()\n  public previewSize: PreviewSize = 'cover';\n\n  @Input()\n  public background: string = 'black';\n\n  @Input()\n  public borderRadius: string = '30px';\n\n  @Input()\n  public height: string = '20px';\n\n  @Input()\n  public width: string = '20px';\n\n  @Output()\n  public onFileSelectedEmitter$: EventEmitter<File | null> =\n    new EventEmitter<File | null>();\n\n  public selectedFileUrl: string | ArrayBuffer | null = null;\n  public isContentAvailabe: boolean = false;\n  public selectedFile: File | null = null;\n  public secondLetter?: string;\n  public firstLetter?: string;\n\n  public ngAfterViewInit(): void {\n    this.calculateLettersSize();\n  }\n\n  ngOnChanges(): void {\n    this.splitNameToLetters();\n    if (this.imageURL) {\n      this.selectedFileUrl = this.imageURL;\n    }\n\n    if (this.removeImage) {\n      this.selectedFileUrl = null;\n      this.calculateLettersSize();\n      this.onFileSelectedEmitter$.emit(null);\n      this.fileUpload.nativeElement.value = '';\n    }\n  }\n\n  public selectFile(event: Event): void {\n    const inputElement = event.target as HTMLInputElement;\n    if (inputElement.files && inputElement.files.length > 0) {\n      const file: File = inputElement.files[0];\n      this.selectedFile = file;\n      const reader = new FileReader();\n      reader.onload = () => (this.selectedFileUrl = reader.result);\n      reader.readAsDataURL(file);\n      this.onFileSelectedEmitter$.emit(file);\n      this.fileUpload.nativeElement.value = ''\n    }\n  }\n\n  private getAvatar(): HTMLElement {\n    return this.avatar.nativeElement;\n  }\n\n  private getAvatarSize(): SizeType {\n    const computedStyles = window.getComputedStyle(this.getAvatar());\n    const size: SizeType = {\n      width: computedStyles.width,\n      height: computedStyles.height,\n    };\n    return size;\n  }\n\n  private calculateLettersSize(): void {\n    setTimeout(() => {\n      const width = this.getAvatarSize().width.replace(/\\D/g, '');\n      const height = this.getAvatarSize().height.replace(/\\D/g, '');\n      const fontSize = Math.min(Number(width), Number(height)) / 5;\n      const firstLetter = this.letters.first.nativeElement as HTMLElement;\n      const secondLetter = this.letters.last.nativeElement as HTMLElement;\n      firstLetter.style.fontSize = `${fontSize * 2}px`;\n      secondLetter.style.fontSize = `${fontSize * 2}px`;\n    }, 1);\n  }\n\n  private splitNameToLetters(): void {\n    if (this.fullName) {\n      const name: string[] = this.fullName.split(' ');\n      this.firstLetter = name[0].substring(0, 1);\n      this.secondLetter = name[1].substring(0, 1);\n    }\n  }\n}\n","<div #avatar class=\"avatar\" (click)=\"fileUpload.click()\"\n    [ngClass]=\"{'is_changeable': isChangeable, 'no_event': !isChangeable}\" [ngStyle]=\"{\n        width: width,\n        height: height,\n        'backgroundImage': 'url(' +  selectedFileUrl + ')',\n        'border-radius': borderRadius,\n        'background-size': previewSize,\n        'background-color': background\n    }\">\n\n    <span *ngIf=\"!selectedFileUrl\" #letter class=\"avatar__letters\" [ngClass]=\"{'bold': isBold}\">{{firstLetter}}</span>\n    <span *ngIf=\"!selectedFileUrl\" #letter class=\"avatar__letters\" [ngClass]=\"{'bold': isBold}\">{{secondLetter}}</span>\n    <div *ngIf=\"isChangeable\" class=\"avatar__change\" [ngStyle]=\"{'background': backDropColor}\" #containerContent>\n        <ng-content></ng-content>\n    </div>\n</div>\n\n<input #fileUpload type=\"file\" class=\"file\" [accept]=\"acceptTypes\" (change)=\"selectFile($event)\">","import { NgModule } from '@angular/core';\nimport { NgxDefaultAvatarComponent } from './component/ngx-default-avatar.component';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  declarations: [\n    NgxDefaultAvatarComponent\n  ],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    NgxDefaultAvatarComponent\n  ]\n})\nexport class NgxDefaultAvatarModule { }\n","/*\n * Public API Surface of ngx-default-avatar\n */\n\nexport * from './lib/component/ngx-default-avatar.component';\nexport * from './lib/ngx-default-avatar.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}